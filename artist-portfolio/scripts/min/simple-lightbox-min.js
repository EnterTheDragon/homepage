!function($,e,t,n){"use strict";$.fn.simpleLightbox=function(n){var n=$.extend({overlay:!0,spinner:!1,nav:!0,navText:["&lt;","&gt;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",close:!0,closeText:"&#215;",showCounter:!1,fileExt:"png|jpg|jpeg|gif",animationSlide:!1,animationSpeed:70,preloading:!0,enableKeyboard:!0,loop:!0,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,disableRightClick:!1,disableScroll:!0,alertError:!0},n),i="ontouchstart"in e,a=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,o=function(e){if(i)return!0;if(!a||"undefined"==typeof e||"undefined"==typeof e.pointerType)return!1;if("undefined"!=typeof e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!=e.pointerType)return!0}else if("mouse"!=e.pointerType)return!0;return!1},s=0,l=$(),r=function(){var e=t.body||t.documentElement,e=e.style;return""==e.WebkitTransition?"-webkit-":""==e.MozTransition?"-moz-":""==e.OTransition?"-o-":""==e.transition?"":!1},d=!1,p=$(this.selector,this.context),r=r(),c=r!==!1?!0:!1,f="simplelb",u=$("<div>").addClass("sl-overlay"),h=$("<button>").addClass("sl-close").html(n.closeText),g=$("<div>").addClass("sl-spinner").html("<div></div>"),m=$("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+n.navText[0]+'</button><button class="sl-next">'+n.navText[1]+"</button>"),v=$("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),b=!1,x=0,y=$(),w=$("<div>").addClass("sl-caption pos-"+n.captionPosition),T=$("<div>").addClass("sl-wrapper").addClass(n.className).html('<div class="sl-image"></div>'),S=function(e){return n.fileExt?"a"==$(e).prop("tagName").toLowerCase()&&new RegExp(".("+n.fileExt+")$","i").test($(e).attr("href")):!0},E=function(){y=$(".sl-image"),n.close&&h.appendTo(T),n.showCounter&&p.length>1&&(v.appendTo(T),v.find(".sl-total").text(p.length)),n.nav&&m.appendTo(T),n.spinner&&g.appendTo(T)},C=function(e){e.trigger($.Event("show.simplelightbox")),n.disableScroll&&q("hide"),T.appendTo("body"),n.overlay&&u.appendTo($("body")),b=!0,x=p.index(e),l=$("<img/>").hide().attr("src",e.attr("href")),$(".sl-image").html(""),l.appendTo($(".sl-image")),u.fadeIn("fast"),$(".sl-close").fadeIn("fast"),g.show(),m.fadeIn("fast"),$(".sl-wrapper .sl-counter .sl-current").text(x+1),v.fadeIn("fast"),k(),n.preloading&&D(),setTimeout(function(){e.trigger($.Event("shown.simplelightbox"))},n.animationSpeed)},k=function(t){if(l.length){var i=new Image,a=$(e).width()*n.widthRatio,o=$(e).height()*n.heightRatio;i.src=l.attr("src"),$(i).bind("error",function(e){b=!1,n.alertError&&alert("Image not found, next image will be loaded"),P(1)}),i.onload=function(){var s=i.width,r=i.height;if(s>a||r>o){var f=s/r>a/o?s/a:r/o;s/=f,r/=f}$(".sl-image").css({top:($(e).height()-r)/2+"px",left:($(e).width()-s)/2+"px"}),g.hide(),l.css({width:s+"px",height:r+"px"}).fadeIn("fast"),d=!0;var u="self"==n.captionSelector?p.eq(x):p.eq(x).find(n.captionSelector);if("data"==n.captionType)var h=u.data(n.captionsData);else if("text"==n.captionType)var h=u.html();else var h=u.prop(n.captionsData);if(n.loop||(0==x&&$(".sl-prev").hide(),x>=p.length-1&&$(".sl-next").hide(),x>0&&x<p.length-1&&$(".sl-prev, .sl-next").show()),1==p.length&&$(".sl-prev, .sl-next").hide(),1==t||-1==t){var m={opacity:1};n.animationSlide&&(c?(M(0,100*t+"px"),setTimeout(function(){M(n.animationSpeed/1e3,"0px"),50})):m.left=parseInt($(".sl-image").css("left"))+100*t+"px"),$(".sl-image").animate(m,n.animationSpeed,function(){b=!1,I(h)})}else b=!1,I(h)}}},I=function(e){""!=e&&"undefined"!=typeof e&&n.captions&&w.html(e).hide().appendTo($(".sl-image")).delay(n.captionDelay).fadeIn("fast")},M=function(e,t){var n={};n[r+"transform"]="translateX("+t+")",n[r+"transition"]=r+"transform "+e+"s linear",$(".sl-image").css(n)},D=function(){var e=0>x+1?p.length-1:x+1>=p.length-1?0:x+1,t=0>x-1?p.length-1:x-1>=p.length-1?0:x-1;$("<img />").attr("src",p.eq(e).attr("href")).load(),$("<img />").attr("src",p.eq(t).attr("href")).load()},P=function(e){g.show();var t=x+e;if(!(b||(0>t||t>=p.length)&&0==n.loop)){x=0>t?p.length-1:t>p.length-1?0:t,$(".sl-wrapper .sl-counter .sl-current").text(x+1);var i={opacity:0};n.animationSlide&&(c?M(n.animationSpeed/1e3,-100*e-s+"px"):i.left=parseInt($(".sl-image").css("left"))+-100*e+"px"),$(".sl-image").animate(i,n.animationSpeed,function(){setTimeout(function(){var t=p.eq(x);l.attr("src",t.attr("href")),$(".sl-caption").remove(),k(e),n.preloading&&D()},100)})}},R=function(){if(!b){var e=p.eq(x),t=!1;e.trigger($.Event("close.simplelightbox")),$(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){n.disableScroll&&q("show"),$(".sl-wrapper, .sl-overlay").remove(),t||e.trigger($.Event("closed.simplelightbox")),t=!0}),l=$(),d=!1,b=!1}},q=function(n){if("hide"==n){var i=e.innerWidth;if(!i){var a=t.documentElement.getBoundingClientRect();i=a.right-Math.abs(a.left)}if(t.body.clientWidth<i){var o=t.createElement("div"),s=parseInt($("body").css("padding-right"),10);o.className="sl-scrollbar-measure",$("body").append(o);var l=o.offsetWidth-o.clientWidth;$(t.body)[0].removeChild(o),$("body").data("padding",s),l>0&&$("body").css({"padding-right":s+l,overflow:"hidden"})}}else $("body").css({"padding-right":$("body").data("padding"),overflow:"auto"})};E(),$(e).on("resize",k),p.on("click."+f,function(e){if(S(this)){if(e.preventDefault(),b)return!1;C($(this))}}),$(t).on("click",".sl-close",function(e){e.preventDefault(),d&&R()}),$(t).click(function(e){d&&n.docClose&&0==$(e.target).closest(".sl-image").length&&0==$(e.target).closest(".sl-navigation").length&&R()}),n.disableRightClick&&$(t).on("contextmenu",".sl-image img",function(e){return!1}),$(t).on("click",".sl-navigation button",function(e){e.preventDefault(),s=0,P($(this).hasClass("sl-next")?1:-1)}),n.enableKeyboard&&$(t).on("keyup."+f,function(e){if(e.preventDefault(),s=0,d){var t=e.keyCode;27==t&&R(),(37==t||39==e.keyCode)&&P(39==e.keyCode?1:-1)}});var N=0,O=0,W=!1,X=0;return $(t).on("touchstart mousedown pointerdown MSPointerDown",".sl-image",function(e){return W?!0:(c&&(X=parseInt(y.css("left"))),W=!0,N=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,!1)}).on("touchmove mousemove pointermove MSPointerMove",function(e){return W?(e.preventDefault(),O=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,s=N-O,void(n.animationSlide&&(c?M(0,-s+"px"):y.css("left",X-s+"px")))):!0}).on("touchend mouseup touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(e){W&&(W=!1,Math.abs(s)>n.swipeTolerance?P(s>0?1:-1):n.animationSlide&&(c?M(n.animationSpeed/1e3,"0px"):y.animate({left:X+"px"},n.animationSpeed/2)))}),this.open=function(e){C(e)},this.next=function(){P(1)},this.prev=function(){P(-1)},this.close=function(){R()},this.destroy=function(){$(t).unbind("click."+f).unbind("keyup."+f),R(),$(".sl-overlay, .sl-wrapper").remove()},this}}(jQuery,window,document);